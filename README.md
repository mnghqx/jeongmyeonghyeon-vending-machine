# XID Vending Machine

자판기 시뮬레이터입니다. <br />
사용자가 실제 자판기 앞에서 하는 일련의 아날로그 조작(동전·지폐 넣기, 카드 꽂기, 번호판 누르기, 음료·거스름돈 챙기기)을 그대로 웹 UI로 옮기는 데 집중했습니다.
디지털 인터페이스라면 더 간편하게 단순화할 수도 있었지만, “자판기의 아날로그 사용성을 얼마나 자연스럽게 디지털로 옮길 수 있는지”로 방향을 잡고, 실제 자판기에서 느껴지는 작은 불편함과 제약들도 의도적으로 유지했습니다.

> ## AI 사용 내역
>
> 구현 과정에서 ChatGPT(GPT-5.1 Thinking)를 다음과 같은 방식으로 참고했습니다.
>
> - 자판기 시뮬레이션의 전체 흐름과 예외 상황(금액 부족, 재고 부족, 카드/현금 혼용, 카드 미회수 등)을 정리할 때 아이디어 브레인스토밍용으로 사용했습니다.
> - 소지금 / 투입 금액 / 카드 잔액 / 선택 번호 / 메시지 상태 등 주요 상태값 설계와, 어떤 상태를 어떤 패널에 보여줄지에 대한 구조를 논의하는 데 참고했습니다.
> - React + TypeScript로 이벤트 핸들러를 구성하는 방법, 예외 처리 분기, 컴포넌트/유틸 함수 분리 방향 등에 대해 예시 코드를 받아 참고한 뒤, 프로젝트에 맞게 수정‧재작성해서 사용했습니다.
> - 테크 데모 페이지 스타일을 참고하여, 전체 레이아웃(좌측 자판기 패널 / 우측 결제 패널)과 버튼·카드·메시지 영역의 톤앤매너를 잡고 CSS를 다듬을 때 조언을 받았습니다.
> - README.md와 “매커니즘 도식 문서” 초안 작성 후, 문장 다듬기와 구조 정리를 위해 문서 표현을 일부 수정했습니다.
> 
> 자동 생성된 코드는 그대로 붙여넣기하기보다, <br />
> 동작 원리를 이해한 뒤 현재 프로젝트 구조와 요구사항에 맞게 직접 수정‧보완하여 사용했습니다. <br />
> 최종 동작 플로우와 예외 처리 방식에 대한 결정은 모두 직접 내렸습니다.

### 1. 프로젝트 개요

이 프로젝트는 다음과 같은 흐름을 시뮬레이션합니다.

1. 사용자가 자판기 앞에 선다.
2. 현금을 투입하거나 카드를 꽂아 결제 수단을 준비한다.
3. 숫자 키패드로 상품 번호(01~16)를 입력한다.
4. 시스템이 순서대로 검증한다.
- 유효한 상품 번호인지
- 품절 상태가 아닌지
- 투입 금액 또는 카드 잔액이 상품 가격 이상인지

5. 모든 조건을 통과하면 음료가 배출되고, 사용자는
- 음료 가져가기
- 거스름돈 가져가기
- 더 구매하기
- 카드 꺼내기
  중에서 선택하며 이용을 마무리한다.

실제 자판기에서 겪을 수 있는 상황을 최대한 반영하기 위해 다음 예외 케이스들을 포함시켰습니다.
- 존재하지 않는 상품 번호
- 상품 품절
- 금액 부족(현금 / 카드 공통)
- 카드 잔액 소진
- 지폐 인식 실패 및 중복 투입 방지
- 현금/카드 혼용 시도
- 카드 미회수

레이아웃은 다음과 같이 나뉩니다.

- 왼쪽: 자판기 본체
  (디스플레이, 상품 진열, 번호 키패드, 음료/거스름돈 배출구)
- 오른쪽: 결제 패널
  (카드 영역, 현금 투입 버튼, 소지금 표시)

사용자가 화면을 보면서
왼쪽은 자판기, 오른쪽은 내 지갑/결제 수단이라는 모델을 자연스럽게 가지도록 의도했습니다.

⸻

### 2. 실행 방법

2-1. 의존성 설치

# npm 기준

```
npm install
```

원하면 pnpm install / yarn install 등으로 바꿔도 됩니다.

2-2. 로컬 실행

```
npm run dev
```

브라우저에서 아래 주소로 접속합니다.
- http://localhost:5173

⸻

### 3. 주요 동작 및 상태

3-1. 금액 관련 상태

- 소지금
  - 사용자가 가진 전체 현금을 나타냅니다.
  - 초기값은 10,000원입니다.
  - 현금을 투입하면 소지금에서 차감되고, 거스름돈을 가져가면 다시 소지금으로 돌아옵니다.
  - 실제로 내가 가진 돈 안에서만 쓸 수 있다는 느낌을 주기 위한 장치입니다.
- 투입 금액
  - 현재 자판기 안에 들어가 있는 금액입니다.
  - 100 / 500 / 1,000 / 5,000 / 10,000원 버튼으로 투입할 수 있습니다.
  - 사용을 마친 뒤에는
    - 거스름돈 반환 → 거스름돈 가져가기 플로우를 통해 다시 소지금으로 회수합니다.
- 카드 잔액
  - 오른쪽 카드 영역에서 관리되는 금액입니다.
  - 정상 카드와 오류 카드를 구분해서 넣을 수 있습니다.
  - 정상 카드는 내부적으로 일정 금액(예: 10,000원)을 가진다고 가정합니다.
- 카드 결제 시 상품 가격만큼 잔액이 차감되며,
  - 잔액이 부족하면 카드 잔액이 부족합니다. 메시지를 띄우고 결제를 막습니다.

3-2. 상품/재고 상태

- 상품 목록
  - 번호 1~16까지 상품이 있습니다.
  - 예시 구성
    - 1번: 콜라
    - 3, 6, 11번: 커피
    - 나머지: 물
  - 각 상품은 이름, 가격(콜라 1,100원 / 커피 700원 / 물 600원), 재고 수량을 가집니다.
- 재고 상태
  - 각 상품별로 독립적인 재고를 갖습니다.
  - 결제가 완료될 때마다 재고는 1씩 감소합니다.
  - UI에서는 상품 카드 하단의 초록색 점 개수로 표현하며,
    - 재고가 0이 되면 이름 옆에 품절 표시가 붙습니다.

3-3. UI/로직 상태

- 선택된 상품 번호
  - 숫자 키패드 입력으로 만들어지는 두 자리 번호(01~16)입니다.
  - 패널 우측 상단의 선택 번호 영역에서 강조된 텍스트로 표시됩니다.
  - 다시 입력 버튼을 누르면 초기화됩니다.
- 메시지 상태
  - 상단 디스플레이에서 현재 안내 문구를 보여줍니다.
  - 두 가지 타입으로 나뉩니다.
    - 성공/정보: 초록색 텍스트
    - 오류/경고: 빨간색 텍스트
  - 두 타입 모두 짧게 흔들리는 애니메이션이 적용됩니다.
  - 같은 오류가 반복되어도 매번 다시 흔들리도록 구현했습니다.
- 마지막 배출 상태
  - 마지막으로 나온 음료, 마지막으로 발생한 거스름돈 금액을 별도 상태로 관리합니다.
  - 왼쪽 하단의
    - 아직 나온 음료가 없습니다.
    - 아직 나온 거스름돈이 없습니다. 영역이 최신 상태를 보여줍니다.

⸻

### 4. 예외 처리 요약

- 존재하지 않는 상품 번호
  - 01~16 범위를 벗어나는 번호를 입력 후 확인을 누르면
    - 존재하지 않는 상품 번호입니다. 메시지를 빨간색으로 표시하고 선택 번호를 초기화합니다.
- 품절
  - 유효한 번호지만 재고가 0인 경우
    - 품절된 상품입니다. 메시지를 출력하고 입력 상태를 초기화합니다.
- 금액 부족
  - 투입 금액 또는 카드 잔액이 상품 가격보다 적을 때
    - 금액이 부족합니다. 메시지를 띄우고 결제를 진행하지 않습니다.
- 카드 잔액 소진
  - 카드 잔액이 0이거나 상품 가격보다 적게 남은 상태에서 결제 시도 시
    - 카드 잔액이 부족합니다. 메시지를 출력하고 추가 결제를 막습니다.
  - 카드로 결제한 뒤 음료를 가져간 시점에는
    - 더 이상 구매하지 않으신다면 카드를 꺼내 주세요. 와 같은 안내를 띄워 카드 미회수를 줄입니다.
  - 지폐 인식 실패 및 중복 투입 방지
    - 특정 상황을 가정해
      - 지폐 인식에 실패했습니다. 지폐를 먼저 가져간 뒤 다시 넣어 주세요. 메시지를 보여줍니다.
  - 인식 실패 지폐를 아직 가져가지 않은 상태에서 다른 지폐를 넣으려 하면
    - 기존 지폐를 먼저 가져가라는 경고만 하고, 새 지폐는 투입 금액에 반영하지 않습니다.
  - 현금/카드 혼용 방지
    - 카드를 꽂은 상태에서 현금을 넣거나, 현금을 넣은 상태에서 카드를 꽂으려 하면
      - 이미 선택된 결제 수단이 있습니다. 메시지를 띄우고 추가 결제 수단은 받지 않습니다.
  - 카드 미회수
    - 구매가 끝났는데 카드가 여전히 꽂혀 있고, 사용자가 거스름돈만 가져가거나 더 이상 구매를 하지 않을 때
      - 카드를 잊지 말고 꺼내 주세요. 메시지를 반복적으로 보여줍니다.
  - 카드 꺼내기 버튼을 눌러야 다음 결제 흐름을 시작할 수 있습니다.

⸻

### 5. 사용자 흐름 예시

1. 현금 10,000원을 투입한다.
2. 상품 번호 01(콜라)을 입력하고 확인을 누른다.
3. 투입 금액이 충분하면 콜라가 배출되고, 재고가 1 감소한다.
4. 추가로 물(06 등)을 여러 번 구매할 수 있다. 5. 더 이상 구매하지 않을 경우
   - 거스름돈 반환 → 거스름돈 가져가기
   - 카드가 꽂혀 있다면 카드 꺼내기
     를 통해 이용을 종료한다.

⸻

### 6. 설계/문서

프로젝트 설계와 상태 흐름은 별도의 문서로 정리했습니다.

- [xid-diagram.png](https://github.com/mnghqx/jeongmyeonghyeon-vending-machine/blob/main/xid-diagram.png)
  자판기 동작 플로우를 나타낸 다이어그램 이미지
- [매커니즘 도식 문서 (PDF)](https://github.com/mnghqx/jeongmyeonghyeon-vending-machine/blob/main/%EB%A7%A4%EC%BB%A4%EB%8B%88%EC%A6%98%20%EB%8F%84%EC%8B%9D%20%EB%AC%B8%EC%84%9C.pdf)
  금액/상품/메시지 상태, 예외 처리, UI 의도 등을 텍스트로 상세히 정리한 문서

과제 검토 시에는

1. README로 전체 구조를 빠르게 훑어본 뒤
2. 다이어그램과 매커니즘 문서를 통해 상세 동작을 확인하고
3. 실제 화면에서 버튼을 눌러보면서 구현을 확인하는 흐름을 의도했습니다.

⸻

### 7. 기술 스택 (간단 정리)

- React
- Vite
- TypeScript
- CSS (테크 데모 페이지 스타일을 참고한 커스텀 스타일)

상태 관리는 별도 전역 상태 라이브러리 없이 컴포넌트/훅 단위로 구성했고,
실제 서비스가 아닌 과제 맥락에 맞춰 가독성과 시뮬레이션 용이성을 우선해서 설계했습니다.
